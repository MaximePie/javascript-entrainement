<!doctype html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="../../style.css"/>
  <title>Menu</title>
  <!--
    Cet exercice permet de travailler les compétences suivantes :
    Module (Import de données)
    Map
    Object (les spécialités seront des objets)
  -->
</head>
<body>
<div>
  <h1>Liste des spécialités culinaires</h1>
  <div class="Exercice">
    <div class="Consignes">
      <p>Créer une liste des spécialités culinaires pour chaque pays d'Europe</p>
      <ul>
        <li>Charger les informations depuis le module <code>menuData.js</code></li>
        <li>
          En vous basant sur les exemples précédents, remplir le tableau des plats pour qu'il y en ai à peu près
          une dizaine.
          Liste des spécialités : <a href="http://lyc71-automobile.ac-dijon.fr/IMG/pdf/l_europe.pdf">Ici</a>
        </li>
        <li>
          Afficher ces informations dans l'élément d'id <code>listePlats</code>
          de manière à ce que pour chaque plat,
          on affiche son pays, son nom, et s'il contient de la viande
        </li>
      </ul>
    </div>
    <div class="Note">
      <ul>
        <li>
          <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Map">
            Utiliser <code>Map</code>
          </a>
        </li>
        <li>
          <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Statements/import">
            Importer depuis un autre fichier
          </a>
        </li>
        <li>
          <a href="https://developer.mozilla.org/fr/docs/Web/API/Node/appendChild">
            Ajouter un élément à un autre élément HTML
          </a>
        </li>
      </ul>
    </div>
  </div>
  <div class="Exercice">
    <div class="Consignes">
      <p>
        Maintenant que votre liste fonctionne, on aimerait la modifier au fil du temps. Pour cela, rien
        de mieux qu'une bonne classe pour gérer les opérations.
      </p>
      <p>Remplir la classe <code>ListePlats</code></p>
      <ul>
        <li>Pour chaque plat affiché, ajouter un <code>EventListener</code> de <code>click</code>.</li>
        <li>
          Lorsque l'on clique sur un plat, déclencher la méthode <code>retirerPlat</code> pour retirer ce plat
          de la liste.
        </li>
      </ul>
    </div>
    <div class="Note">
      <h4>Astuce</h4>
      <p>Si vous ne savez pas par quoi commencer pour retirer un article, essayez de penser <code>id</code></p>
      <p>"Si on clique sur le plat d'ID X, alors retirer le plat dont l'ID est X."</p>
    </div>
  </div>
  <div id="listePlats">
  </div>
</div>
<script type="module">
  import {plats} from "./menuData.js";

  /**
   * Uniquement à partir de l'exercice 2.
   *
   * Méthodes:
   *
   * constructor (liste des plats)
   * La liste des plats reçue en paramètres est égale à la liste chargée depuis le fichier menuData.js
   * Elle affecte la value reçue en paramètre à l'attribut plats
   *
   * retirerPlat
   * Cette méthode retire le plat ciblé de la liste des plats
   *
   * afficherPlats
   * Cette méthode affiche tous les plats contenus dans plats
   *
   * Attributs de la classe :
   * plats: Un tableau des plats
   */
  class ListePlats {
    constructor(listePlats) {
      this.plats = listePlats;
      this.afficherPlats();
    }

    retirerPlat = (key) => {
      this.plats.delete(key);
      this.afficherPlats();
    }

    afficherPlats = () => {
      const listePlats = document.getElementById("listePlats");
      listePlats.innerHTML = '';

      this.plats.forEach((value, key) => {
        const platElement = document.createElement('p');

        // Express ternaire javascript (Inline condition)
        platElement.innerText = `${key} : ${value.plat} - ${value.avecViande ? "Avec viande" : "Sans viande"}`;
        platElement.style.cursor = "pointer";
        platElement.addEventListener("click", () => this.retirerPlat(key));

        listePlats.appendChild(platElement);
      })
    }
  }

  const liste = new ListePlats(plats);

</script>
</body>
</html>
